(function(b){jQuery.G.ka=function(c){var g=this,f=g.parent("div"),h=b("<ul>",{"class":"files"}).insertBefore(g),k=f.find(".empty-value"),d={H:function(){c.multiple&&(g.f("multiple",!0),g.f("name",g.f("name")+"[]"));f.c("upload-kit");c.N&&h.N({placeholder:"upload-kit-item sortable-placeholder",ga:"pointer",Y:!0,update:function(){d.O()}});g.ja(b('<li class="upload-kit-input"></div>')).i(b('<span class="glyphicon glyphicon-plus-sign add"></span>')).i(b('<span class="glyphicon glyphicon-circle-arrow-down drag"></span>')).i(b("<span/>",
{"data-toggle":"popover","class":"glyphicon glyphicon-exclamation-sign error-popover"})).i('<div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div></li>');h.o("click",".upload-kit-item .remove",d.removeItem);d.g();d.F();d.B();!c.b||c.b instanceof RegExp||(c.b=new RegExp(eval(c.b)))},F:function(){var a=g.D({name:c.name||"file",url:c.url,U:g.L(".upload-kit-input"),dataType:"json",fa:!1,multiple:c.multiple,l:c.l,I:c.I,b:c.b,K:c.K,
J:c.J,ba:!0,a:d.a,start:function(){f.find(".upload-kit-input").h("error").c("in-progress")},ca:function(a,b){b.files.error&&d.m(b.files[0].error)},da:function(a,b){var c=parseInt(b.loaded/b.total*100,10);f.find(".progress-bar").f("aria-valuenow",c).w("width",c+"%").text(c+"%")},done:function(a,c){b.C(c.result.files,function(b,a){a.error?d.m(a.W):d.v(a).T(h)});d.j();d.g()},X:function(a,b){d.m(b.V)},S:function(){f.find(".upload-kit-input").h("in-progress")}});c.files&&(c.files.sort(function(a,b){return parseInt(a.s)-
parseInt(b.s)}),a.D("option","done").call(a,b.Event("done"),{result:{files:c.files}}),d.j(),d.g())},B:function(){b(document).o("dragover",function(){b(".upload-kit-input").c("drag-highlight")});b(document).o("dragleave drop",function(){b(".upload-kit-input").h("drag-highlight")})},m:function(a){b.G.M&&f.find(".error-popover").f("data-content",a).M({$:!0,ha:"hover"});f.find(".upload-kit-input").c("error")},removeItem:function(){var a=b(this),c=a.data("url");c&&b.R({url:c,type:"DELETE"});a.L(".upload-kit-item").remove();
d.j();d.g()},v:function(a){var e=c.name,f;f=d.a();c.multiple&&(e+="["+f+"]");f=a.A?a.A:c.ia+"?path="+a.path;e=b("<li>",{"class":"upload-kit-item done"}).append(b("<input/>",{name:e+"[path]",value:a.path,type:"hidden"})).append(b("<input/>",{name:e+"[name]",value:a.name,type:"hidden"})).append(b("<input/>",{name:e+"[size]",value:a.size,type:"hidden"})).append(b("<input/>",{name:e+"[type]",value:a.type,type:"hidden"})).append(b("<input/>",{name:e+"[order]",value:a.s,type:"hidden","data-role":"order"})).append(b("<input/>",
{name:e+"[base_url]",value:a.u,type:"hidden"})).append(b("<span/>",{"class":"name",title:a.name})).append(b("<span/>",{"class":"glyphicon glyphicon-remove-circle remove","data-url":f}));a.type&&-1===a.type.search(/image\/.*/g)?(e.h("image").c("not-image"),e.w("backgroundImage",""),e.find("span.name").text(a.name)):(e.h("not-image").c("image"),e.aa(b("<img/>",{src:a.u+"/"+a.path})),e.find("span.type").text(""));return e},g:function(){var a=f.find(".upload-kit-input");c.l&&d.a()>=c.l?a.Z():a.show()},
j:function(){0<d.a()?k.P(d.a()):k.ea("value")},a:function(){return f.find(".files .upload-kit-item").length},O:function(){h.find(".upload-kit-item").C(function(a,c){b(c).find("input[data-role=order]").P(a)})}};d.H.apply(this);return this}})(jQuery);
